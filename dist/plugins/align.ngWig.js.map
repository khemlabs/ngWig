{"version":3,"sources":["align.ngWig.js"],"names":["bindings","execCommand","editMode","disabled","nextNode","node","hasChildNodes","firstChild","nextSibling","parentNode","getRangeSelectedNodes","range","startContainer","endNode","endContainer","rangeNodes","push","commonAncestorContainer","unshift","getSelectedNodes","window","getSelection","sel","isCollapsed","getRangeAt","template","icon","title","align","parent","_align","nodes","length","listId","focusNode","angular","element","attr","forEach","module","config","ngWigToolbarProvider","addCustomButton","component","controller","_this"],"mappings":"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","file":"align.ngWig.js","sourcesContent":["'use strict';\n\nvar bindings = {\n\texecCommand: '=',\n\teditMode: '=',\n\tdisabled: '='\n};\n\nfunction nextNode(node) {\n\tif (node.hasChildNodes()) {\n\t\treturn node.firstChild;\n\t} else {\n\t\twhile (node && !node.nextSibling) {\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\tif (!node) {\n\t\t\treturn null;\n\t\t}\n\t\treturn node.nextSibling;\n\t}\n}\n\nfunction getRangeSelectedNodes(range) {\n\tvar node = range.startContainer;\n\tvar endNode = range.endContainer;\n\n\t// Special case for a range that is contained within a single node\n\tif (node == endNode) {\n\t\treturn [node];\n\t}\n\n\t// Iterate nodes until we hit the end container\n\tvar rangeNodes = [];\n\twhile (node && node != endNode) {\n\t\trangeNodes.push(node = nextNode(node));\n\t}\n\n\t// Add partially selected nodes at the start of the range\n\tnode = range.startContainer;\n\twhile (node && node != range.commonAncestorContainer) {\n\t\trangeNodes.unshift(node);\n\t\tnode = node.parentNode;\n\t}\n\n\treturn rangeNodes;\n}\n\nfunction getSelectedNodes() {\n\tif (window.getSelection) {\n\t\tvar sel = window.getSelection();\n\t\tif (!sel.isCollapsed) {\n\t\t\treturn getRangeSelectedNodes(sel.getRangeAt(0));\n\t\t}\n\t}\n\treturn [];\n}\n\nvar template = function template(icon, title) {\n\treturn '<button ng-click=\"$ctrl.align()\" type=\"button\" ng-disabled=\"$ctrl.editMode || $ctrl.disabled\" class=\"nw-button\" title=\"' + title + '\"><i class=\"material-icons md-dark\">' + icon + '</i></button>';\n};\n\nvar align = function align(parent, _align) {\n\tparent.execCommand('formatblock', 'div');\n\tvar nodes = getSelectedNodes();\n\tif (nodes.length == 1) {\n\t\tvar listId = window.getSelection().focusNode.parentNode;\n\t\tangular.element(listId).attr('style', 'text-align: ' + _align);\n\t\treturn;\n\t}\n\tnodes.forEach(function (node) {\n\t\tangular.element(node).attr('style', 'text-align:' + _align);\n\t});\n};\n\nangular.module('ngWig').config(['ngWigToolbarProvider', function (ngWigToolbarProvider) {\n\tngWigToolbarProvider.addCustomButton('left', 'nw-left-button');\n\tngWigToolbarProvider.addCustomButton('center', 'nw-center-button');\n\tngWigToolbarProvider.addCustomButton('right', 'nw-right-button');\n}]).component('nwLeftButton', {\n\tbindings: bindings,\n\ttemplate: template('format_align_left', 'left'),\n\tcontroller: function controller() {\n\t\tvar _this = this;\n\t\tthis.align = function () {\n\t\t\treturn align(_this, 'left');\n\t\t};\n\t}\n}).component('nwCenterButton', {\n\tbindings: bindings,\n\ttemplate: template('format_align_center', 'center'),\n\tcontroller: function controller() {\n\t\tvar _this = this;\n\t\tthis.align = function () {\n\t\t\treturn align(_this, 'center');\n\t\t};\n\t}\n}).component('nwRightButton', {\n\tbindings: bindings,\n\ttemplate: template('format_align_right', 'right'),\n\tcontroller: function controller() {\n\t\tvar _this = this;\n\t\tthis.align = function () {\n\t\t\treturn align(_this, 'right');\n\t\t};\n\t}\n});\n//# sourceMappingURL=formats.ngWig.js.map\n//# sourceMappingURL=align.ngWig.js.map\n//# sourceMappingURL=align.ngWig.js.map\n//# sourceMappingURL=align.ngWig.js.map\n//# sourceMappingURL=align.ngWig.js.map\n//# sourceMappingURL=align.ngWig.js.map\n"]}