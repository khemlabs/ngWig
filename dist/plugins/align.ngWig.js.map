{"version":3,"sources":["align.ngWig.js"],"names":["bindings","execCommand","editMode","disabled","nextNode","node","hasChildNodes","firstChild","nextSibling","parentNode","getRangeSelectedNodes","range","startContainer","endNode","endContainer","rangeNodes","push","commonAncestorContainer","unshift","getSelectedNodes","window","getSelection","sel","isCollapsed","getRangeAt","template","icon","title","align","parent","nodes","length","listId","focusNode","angular","element","attr","forEach","module","config","ngWigToolbarProvider","addCustomButton","component","controller","_this"],"mappings":"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","file":"align.ngWig.js","sourcesContent":["'use strict';\n\nvar bindings = {\n\texecCommand: '=',\n\teditMode: '=',\n\tdisabled: '='\n};\n\nfunction nextNode(node) {\n\tif (node.hasChildNodes()) {\n\t\treturn node.firstChild;\n\t} else {\n\t\twhile (node && !node.nextSibling) {\n\t\t\tnode = node.parentNode;\n\t\t}\n\t\tif (!node) {\n\t\t\treturn null;\n\t\t}\n\t\treturn node.nextSibling;\n\t}\n}\n\nfunction getRangeSelectedNodes(range) {\n\tvar node = range.startContainer;\n\tvar endNode = range.endContainer;\n\n\t// Special case for a range that is contained within a single node\n\tif (node == endNode) {\n\t\treturn [node];\n\t}\n\n\t// Iterate nodes until we hit the end container\n\tvar rangeNodes = [];\n\twhile (node && node != endNode) {\n\t\trangeNodes.push((node = nextNode(node)));\n\t}\n\n\t// Add partially selected nodes at the start of the range\n\tnode = range.startContainer;\n\twhile (node && node != range.commonAncestorContainer) {\n\t\trangeNodes.unshift(node);\n\t\tnode = node.parentNode;\n\t}\n\n\treturn rangeNodes;\n}\n\nfunction getSelectedNodes() {\n\tif (window.getSelection) {\n\t\tvar sel = window.getSelection();\n\t\tif (!sel.isCollapsed) {\n\t\t\treturn getRangeSelectedNodes(sel.getRangeAt(0));\n\t\t}\n\t}\n\treturn [];\n}\n\nvar template = function(icon, title) {\n\treturn (\n\t\t'<button ng-click=\"$ctrl.align()\" type=\"button\" ng-disabled=\"$ctrl.editMode || $ctrl.disabled\" class=\"nw-button\" title=\"' +\n\t\ttitle +\n\t\t'\"><i class=\"material-icons md-dark\">' +\n\t\ticon +\n\t\t'</i></button>'\n\t);\n};\n\nvar align = function(parent, align) {\n\tparent.execCommand('formatblock', 'div');\n\tvar nodes = getSelectedNodes();\n\tif (nodes.length == 1) {\n\t\tvar listId = window.getSelection().focusNode.parentNode;\n\t\tangular.element(listId).attr('style', 'text-align: ' + align);\n\t\treturn;\n\t}\n\tnodes.forEach(function(node) {\n\t\tangular.element(node).attr('style', 'text-align:' + align);\n\t});\n};\n\nangular\n\t.module('ngWig')\n\t.config([\n\t\t'ngWigToolbarProvider',\n\t\tfunction(ngWigToolbarProvider) {\n\t\t\tngWigToolbarProvider.addCustomButton('left', 'nw-left-button');\n\t\t\tngWigToolbarProvider.addCustomButton('center', 'nw-center-button');\n\t\t\tngWigToolbarProvider.addCustomButton('right', 'nw-right-button');\n\t\t}\n\t])\n\t.component('nwLeftButton', {\n\t\tbindings: bindings,\n\t\ttemplate: template('format_align_left', 'left'),\n\t\tcontroller: function controller() {\n\t\t\tvar _this = this;\n\t\t\tthis.align = function() {\n\t\t\t\treturn align(_this, 'left');\n\t\t\t};\n\t\t}\n\t})\n\t.component('nwCenterButton', {\n\t\tbindings: bindings,\n\t\ttemplate: template('format_align_center', 'center'),\n\t\tcontroller: function controller() {\n\t\t\tvar _this = this;\n\t\t\tthis.align = function() {\n\t\t\t\treturn align(_this, 'center');\n\t\t\t};\n\t\t}\n\t})\n\t.component('nwRightButton', {\n\t\tbindings: bindings,\n\t\ttemplate: template('format_align_right', 'right'),\n\t\tcontroller: function controller() {\n\t\t\tvar _this = this;\n\t\t\tthis.align = function() {\n\t\t\t\treturn align(_this, 'right');\n\t\t\t};\n\t\t}\n\t});\n//# sourceMappingURL=formats.ngWig.js.map\n"]}