{"version":3,"sources":["ng-wig.js"],"names":["VERSION","angular","module","ngWig","version","TABKEY","ENTERKEY","component","bindings","content","options","onPaste","buttons","language","beforeExecCommand","afterExecCommand","placeholder","require","ngModelController","templateUrl","controller","$scope","$element","$q","$attrs","$window","$document","$mdDialog","__env","fileService","ngWigToolbar","_this","addString","ev","str","preventDefault","$ctrl","$el","document","getElementById","start","selectionStart","end","selectionEnd","first","substring","last","selected","indexOf","split","join","setTimeout","focus","keyDown","keyCode","$container","element","querySelector","spanish","required","isSourceModeAllowed","editMode","$observe","isDisabled","disabled","attr","isEditorActive","activeElement","toggleEditMode","getSelection","removeAllRanges","execCommand","command","queryCommandSupported","openDialogConfirm","confirmed","openDialog","path","type","token","length","apiDomain","fileCommand","prompt","console","log","_execCommand","selection","toString","$onInit","toolbarButtons","getToolbarButtons","string2array","Boolean","$render","$viewValue","html","empty","bind","$setViewValue","$applyAsync","on","event","pasteContent","window","clipboardData","getData","originalEvent","when","$event","then","pasteText","pasteHtmlAtCaret","keysString","map","Function","prototype","call","String","trim","sel","range","getRangeAt","rangeCount","deleteContents","el","createElement","innerHTML","frag","createDocumentFragment","node","lastNode","firstChild","appendChild","insertNode","cloneRange","setStartAfter","collapse","addRange","createRange","pasteHTML","provider","buttonLibrary","list1","title","styleClass","list2","bold","italic","link","defaultButtonsList","isButtonActive","queryCommandState","setButtons","isArray","addStandardButton","name","push","addCustomButton","pluginName","isComplex","$get","list","forEach","buttonKey","Object","keys","button","copy","isActive","plugin","$compile","replaceWith","run","$templateCache","put"],"mappings":"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","file":"ng-wig.js","sourcesContent":["'use strict';\n\n/**\n * version: 3.0.25\n */\nvar VERSION = '3.0.16';\nangular.module('ngWig', ['ngwig-app-templates']);\nangular.ngWig = {\n\tversion: VERSION\n};\n\nvar TABKEY = 9;\nvar ENTERKEY = 13;\n\nangular.module('ngWig').component('ngWig', {\n\tbindings: {\n\t\tcontent: '=ngModel',\n\t\toptions: '<?',\n\t\tonPaste: '&',\n\t\tbuttons: '@',\n\t\tlanguage: '@',\n\t\tbeforeExecCommand: '&',\n\t\tafterExecCommand: '&',\n\t\tplaceholder: '@?'\n\t},\n\trequire: {\n\t\tngModelController: 'ngModel'\n\t},\n\ttemplateUrl: 'ng-wig/views/ng-wig.html',\n\tcontroller: [\"$scope\", \"$element\", \"$q\", \"$attrs\", \"$window\", \"$document\", \"$mdDialog\", \"__env\", \"fileService\", \"ngWigToolbar\", function ($scope, $element, $q, $attrs, $window, $document, $mdDialog, __env, fileService, ngWigToolbar) {\n\t\tvar _this = this;\n\n\t\tthis.addString = function (ev, str) {\n\t\t\tev.preventDefault();\n\t\t\tif (!$scope.$ctrl.content) $scope.$ctrl.content = '';\n\t\t\tvar $el = document.getElementById('nw-editor__src');\n\t\t\tvar start = $el.selectionStart;\n\t\t\tvar end = $el.selectionEnd;\n\t\t\tvar first = $scope.$ctrl.content.substring(0, start);\n\t\t\tvar last = $scope.$ctrl.content.substring(end);\n\t\t\tvar selected = $scope.$ctrl.content.substring(start, end);\n\t\t\tif (str == '\\t' && selected.indexOf('\\n') >= 0) {\n\t\t\t\tstr = '\\t' + selected.split('\\n').join('\\n\\t');\n\t\t\t}\n\t\t\tvar content = '' + first + str + last;\n\t\t\t$scope.$ctrl.content = content;\n\t\t\tsetTimeout(function () {\n\t\t\t\t$el.focus();\n\t\t\t\t$el.selectionStart = $el.selectionEnd = start + 1;\n\t\t\t});\n\t\t};\n\n\t\tthis.keyDown = function (ev) {\n\t\t\tif (ev.keyCode == ENTERKEY) return _this.addString(ev, '\\n');\n\t\t\tif (ev.keyCode == TABKEY) return _this.addString(ev, '\\t');\n\t\t};\n\n\t\tvar $container = angular.element($element[0].querySelector('#ng-wig-editable'));\n\n\t\tthis.spanish = this.language && this.language == 'spanish';\n\n\t\t//TODO: clean-up this attrs solution\n\t\tthis.required = 'required' in $attrs;\n\t\tthis.isSourceModeAllowed = 'sourceModeAllowed' in $attrs;\n\t\tthis.editMode = false;\n\n\t\t$attrs.$observe('disabled', function (isDisabled) {\n\t\t\t_this.disabled = isDisabled;\n\t\t\t$container.attr('contenteditable', !isDisabled);\n\t\t});\n\t\tthis.isEditorActive = function () {\n\t\t\treturn $container[0] === $document[0].activeElement;\n\t\t};\n\t\tthis.toggleEditMode = function () {\n\t\t\t_this.editMode = !_this.editMode;\n\t\t\tif ($window.getSelection().removeAllRanges) {\n\t\t\t\t$window.getSelection().removeAllRanges();\n\t\t\t}\n\t\t};\n\n\t\tthis.execCommand = function (command, options) {\n\t\t\tif (_this.editMode) return false;\n\n\t\t\tif (command !== 'insertVideo' && $document[0].queryCommandSupported && !$document[0].queryCommandSupported(command)) {\n\t\t\t\tthrow 'The command \"' + command + '\" is not supported';\n\t\t\t}\n\n\t\t\tif (command == 'insertImage') {\n\t\t\t\tfileService.openDialogConfirm(null, $mdDialog, _this.spanish ? 'Confirmar' : 'Confirm', _this.spanish ? '¿Desea utilizar el servicio de imágenes de Khemlabs?' : 'Do you want to use the Khemlabs image service?', '', _this.spanish ? 'Si' : 'Yes', 'No', function (confirmed) {\n\t\t\t\t\tif (confirmed) {\n\t\t\t\t\t\tfileService.openDialog(null, $mdDialog, { path: 'files/image', type: 'image' }, function (token) {\n\t\t\t\t\t\t\tif ($container.length) $container[0].focus();\n\t\t\t\t\t\t\t_this.beforeExecCommand({ command: command, options: options });\n\t\t\t\t\t\t\toptions = __env.apiDomain + 'files/image/' + token;\n\t\t\t\t\t\t\t$document[0].execCommand('insertHtml', false, '<img src=\"' + options + '\"/>');\n\t\t\t\t\t\t\t_this.afterExecCommand({ command: command, options: options });\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\treturn _this.fileCommand(command, options);\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (command == 'insertVideo') {\n\t\t\t\tfileService.openDialogConfirm(null, $mdDialog, _this.spanish ? 'Confirmar' : 'Confirm', _this.spanish ? '¿Desea utilizar el servicio de videos de Khemlabs?' : 'Do you want to use the Khemlabs video service?', '', _this.spanish ? 'Si' : 'Yes', 'No', function (confirmed) {\n\t\t\t\t\tif (confirmed) {\n\t\t\t\t\t\tfileService.openDialog(null, $mdDialog, { path: 'files/video', type: 'video' }, function (token) {\n\t\t\t\t\t\t\tif ($container.length) $container[0].focus();\n\t\t\t\t\t\t\t_this.beforeExecCommand({ command: command, options: options });\n\t\t\t\t\t\t\toptions = __env.apiDomain + 'files/video/' + token;\n\t\t\t\t\t\t\t$document[0].execCommand('insertHtml', false, '<br><br><video style=\"width: 560px; height: 315px\" src=\"' + options + '\"></video><br><br>');\n\t\t\t\t\t\t\t_this.afterExecCommand({ command: command, options: options });\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\toptions = $window.prompt(_this.spanish ? 'Por favor ingrese el ID del video de youtube' : 'Please enter the ID of the youtube video', '');\n\t\t\t\t\tif (!options) return;\n\t\t\t\t\tconsole.log(options);\n\t\t\t\t\t$document[0].execCommand('insertHtml', false, '<br><br><iframe style=\"width: 560px; height: 315px\" src=\"https://www.youtube.com/embed/' + options + '\" frameborder=\"0\" allow=\"autoplay encrypted-media\" allowfullscreen=\"\"></iframe><br><br>');\n\t\t\t\t\t_this.afterExecCommand({ command: command, options: options });\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (command === 'createlink') return _this.fileCommand(command, options);\n\n\t\t\t_this._execCommand(command, options);\n\t\t};\n\n\t\tthis.fileCommand = function (command, options) {\n\t\t\toptions = $window.prompt(_this.spanish ? 'Por favor ingrese la URL' : 'Please enter the URL', 'http://');\n\t\t\tif (!options) return;\n\t\t\t_this._execCommand(command, options);\n\t\t};\n\n\t\tthis._execCommand = function (command, options) {\n\t\t\t_this.beforeExecCommand({ command: command, options: options });\n\n\t\t\t// use insertHtml for `createlink` command to account for IE/Edge purposes, in case there is no selection\n\t\t\tvar selection = $document[0].getSelection().toString();\n\t\t\tif (command === 'createlink' && selection === '') {\n\t\t\t\t$document[0].execCommand('insertHtml', false, '<a href=\"' + options + '\">' + options + '</a>');\n\t\t\t} else {\n\t\t\t\t$document[0].execCommand(command, false, options);\n\t\t\t}\n\n\t\t\t_this.afterExecCommand({ command: command, options: options });\n\n\t\t\t// added temporarily to pass the tests. For some reason $container[0] is undefined during testing.\n\t\t\tif ($container.length) $container[0].focus();\n\t\t};\n\n\t\tthis.$onInit = function () {\n\t\t\t_this.toolbarButtons = ngWigToolbar.getToolbarButtons(_this.buttons && string2array(_this.buttons));\n\n\t\t\tvar placeholder = Boolean(_this.placeholder);\n\n\t\t\t_this.ngModelController.$render = function () {\n\t\t\t\treturn _this.ngModelController.$viewValue ? $container.html(_this.ngModelController.$viewValue) : placeholder ? $container.empty() : $container.html();\n\t\t\t};\n\n\t\t\t$container.bind('blur keyup change focus click', function () {\n\t\t\t\t//view --> model\n\t\t\t\tif (placeholder && (!$container.html().length || $container.html() === '<br>')) $container.empty();\n\t\t\t\t_this.ngModelController.$setViewValue($container.html());\n\t\t\t\t$scope.$applyAsync();\n\t\t\t});\n\t\t};\n\n\t\t$container.on('paste', function (event) {\n\t\t\tif (!$attrs.onPaste) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar pasteContent = void 0;\n\t\t\tif (window.clipboardData && window.clipboardData.getData) {\n\t\t\t\t// IE\n\t\t\t\tpasteContent = window.clipboardData.getData('Text');\n\t\t\t} else {\n\t\t\t\tpasteContent = (event.originalEvent || event).clipboardData.getData('text/plain');\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\t$q.when(_this.onPaste({ $event: event, pasteContent: pasteContent })).then(function (pasteText) {\n\t\t\t\tpasteHtmlAtCaret(pasteText);\n\t\t\t});\n\t\t});\n\t}]\n});\n\n//TODO: check the function\nfunction string2array(keysString) {\n\treturn keysString.split(',').map(Function.prototype.call, String.prototype.trim);\n}\n\n//TODO: put contenteditable helper into service\nfunction pasteHtmlAtCaret(html) {\n\tvar sel = void 0,\n\t    range = void 0;\n\tif (window.getSelection) {\n\t\tsel = window.getSelection();\n\t\tif (sel.getRangeAt && sel.rangeCount) {\n\t\t\trange = sel.getRangeAt(0);\n\t\t\trange.deleteContents();\n\n\t\t\t// Range.createContextualFragment() would be useful here but is\n\t\t\t// non-standard and not supported in all browsers (IE9, for one)\n\t\t\tvar el = document.createElement('div');\n\t\t\tel.innerHTML = html;\n\t\t\tvar frag = document.createDocumentFragment(),\n\t\t\t    node = void 0,\n\t\t\t    lastNode = void 0;\n\t\t\twhile (node = el.firstChild) {\n\t\t\t\tlastNode = frag.appendChild(node);\n\t\t\t}\n\t\t\trange.insertNode(frag);\n\n\t\t\t// Preserve the selection\n\t\t\tif (lastNode) {\n\t\t\t\trange = range.cloneRange();\n\t\t\t\trange.setStartAfter(lastNode);\n\t\t\t\trange.collapse(true);\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t}\n\t\t}\n\t} else if (document.selection && document.selection.type != 'Control') {\n\t\t// IE < 9\n\t\tdocument.selection.createRange().pasteHTML(html);\n\t}\n}\n\nangular.module('ngWig').provider('ngWigToolbar', function () {\n\n\tvar buttonLibrary = {\n\t\tlist1: { title: 'Unordered List', command: 'insertunorderedlist', styleClass: 'list-ul' },\n\t\tlist2: { title: 'Ordered List', command: 'insertorderedlist', styleClass: 'list-ol' },\n\t\tbold: { title: 'Bold', command: 'bold', styleClass: 'bold' },\n\t\titalic: { title: 'Italic', command: 'italic', styleClass: 'italic' },\n\t\tlink: { title: 'Link', command: 'createlink', styleClass: 'link' }\n\t};\n\n\tvar defaultButtonsList = ['list1', 'list2', 'bold', 'italic', 'link'];\n\n\tvar isButtonActive = function isButtonActive() {\n\t\treturn !!this.command && document.queryCommandState(this.command);\n\t};\n\n\tthis.setButtons = function (buttons) {\n\t\tif (!angular.isArray(buttons)) {\n\t\t\tthrow 'Argument \"buttons\" should be an array';\n\t\t}\n\n\t\tdefaultButtonsList = buttons;\n\t};\n\n\tthis.addStandardButton = function (name, title, command, styleClass) {\n\t\tif (!name || !title || !command) {\n\t\t\tthrow 'Arguments \"name\", \"title\" and \"command\" are required';\n\t\t}\n\n\t\tstyleClass = styleClass || '';\n\t\tbuttonLibrary[name] = { title: title, command: command, styleClass: styleClass };\n\t\tdefaultButtonsList.push(name);\n\t};\n\n\tthis.addCustomButton = function (name, pluginName) {\n\t\tif (!name || !pluginName) {\n\t\t\tthrow 'Arguments \"name\" and \"pluginName\" are required';\n\t\t}\n\n\t\tbuttonLibrary[name] = { pluginName: pluginName, isComplex: true };\n\t\tdefaultButtonsList.push(name);\n\t};\n\n\tthis.$get = function () {\n\t\treturn {\n\t\t\tgetToolbarButtons: function getToolbarButtons(list) {\n\t\t\t\tvar toolbarButtons = [];\n\t\t\t\t(list || defaultButtonsList).forEach(function (buttonKey) {\n\t\t\t\t\tif (!buttonLibrary[buttonKey]) {\n\t\t\t\t\t\tthrow 'There is no \"' + buttonKey + '\" in your library. Possible variants: ' + Object.keys(buttonLibrary);\n\t\t\t\t\t}\n\n\t\t\t\t\tvar button = angular.copy(buttonLibrary[buttonKey]);\n\t\t\t\t\tbutton.isActive = isButtonActive;\n\t\t\t\t\ttoolbarButtons.push(button);\n\t\t\t\t});\n\t\t\t\treturn toolbarButtons;\n\t\t\t}\n\t\t};\n\t};\n});\nangular.module('ngWig').component('ngWigPlugin', {\n\tbindings: {\n\t\tplugin: '<',\n\t\texecCommand: '=',\n\t\teditMode: '=',\n\t\tdisabled: '=',\n\t\toptions: '<',\n\t\tcontent: '='\n\t},\n\tcontroller: [\"$scope\", \"$element\", \"$compile\", function ($scope, $element, $compile) {\n\t\tvar $ctrl = this;\n\t\tthis.$onInit = function () {\n\t\t\t$element.replaceWith($compile('<' + $ctrl.plugin.pluginName + ' ' + 'plugin=' + '\"$ctrl.plugin\"' + 'exec-command=' + '\"$ctrl.execCommand\"' + 'edit-mode=' + '\"$ctrl.editMode\"' + 'disabled=' + '\"$ctrl.disabled\"' + 'options=' + '\"$ctrl.options\"' + 'content=' + '\"$ctrl.content\"' + '/>')($scope));\n\t\t};\n\t}]\n});\nangular.module('ngwig-app-templates', ['ng-wig/views/ng-wig.html']);\n\nangular.module(\"ng-wig/views/ng-wig.html\", []).run([\"$templateCache\", function ($templateCache) {\n\t$templateCache.put(\"ng-wig/views/ng-wig.html\", \"<div class=\\\"ng-wig\\\">\\n\" + \"\t<ul class=\\\"nw-toolbar\\\">\\n\" + \"\t\t<li class=\\\"nw-toolbar__item\\\" ng-repeat=\\\"button in $ctrl.toolbarButtons\\\">\\n\" + \"\t\t\t<div ng-if=\\\"!button.isComplex\\\">\\n\" + \"\t\t\t\t<button type=\\\"button\\\" class=\\\"nw-button {{button.styleClass}}\\\" title=\\\"{{button.title}}\\\" ng-click=\\\"$ctrl.execCommand(button.command)\\\"\\n\" + \"\t\t\t\t ng-class=\\\"{ 'nw-button--active': !$ctrl.disabled && $ctrl.isEditorActive() && button.isActive() }\\\" ng-disabled=\\\"$ctrl.editMode || $ctrl.disabled\\\">\\n\" + \"\t\t\t\t\t{{ button.title }}\\n\" + \"\t\t\t\t</button>\\n\" + \"\t\t\t</div>\\n\" + \"\t\t\t<div ng-if=\\\"button.isComplex\\\">\\n\" + \"\t\t\t\t<ng-wig-plugin exec-command=\\\"$ctrl.execCommand\\\" plugin=\\\"button\\\" edit-mode=\\\"$ctrl.editMode\\\" disabled=\\\"$ctrl.disabled\\\" options=\\\"$ctrl.options\\\"\\n\" + \"\t\t\t\t content=\\\"$ctrl.content\\\"></ng-wig-plugin>\\n\" + \"\t\t\t</div>\\n\" + \"\t\t</li>\\n\" + \"\t\t<!--\\n\" + \"    -->\\n\" + \"\t\t<li class=\\\"nw-toolbar__item\\\">\\n\" + \"\t\t\t<button type=\\\"button\\\" class=\\\"nw-button nw-button--source\\\" title=\\\"Edit HTML\\\" ng-class=\\\"{ 'nw-button--active': $ctrl.editMode }\\\"\\n\" + \"\t\t\t ng-if=\\\"$ctrl.isSourceModeAllowed\\\" ng-click=\\\"$ctrl.toggleEditMode()\\\" ng-disabled=\\\"$ctrl.disabled\\\">\\n\" + \"\t\t\t\tEdit HTML\\n\" + \"\t\t\t</button>\\n\" + \"\t\t</li>\\n\" + \"\t</ul>\\n\" + \"\\n\" + \"\t<div class=\\\"nw-editor-container\\\">\\n\" + \"\t\t<div class=\\\"nw-editor__src-container\\\" ng-show=\\\"$ctrl.editMode\\\">\\n\" + \"\t\t\t<textarea ng-model=\\\"$ctrl.content\\\" ng-disabled=\\\"$ctrl.disabled\\\" id=\\\"nw-editor__src\\\" ng-keydown=\\\"$ctrl.keyDown($event)\\\"></textarea>\\n\" + \"\t\t</div>\\n\" + \"\t\t<div class=\\\"nw-editor\\\" ng-class=\\\"{ 'nw-disabled': $ctrl.disabled }\\\">\\n\" + \"\t\t\t<div id=\\\"ng-wig-editable\\\" class=\\\"nw-editor__res\\\" ng-class=\\\"{'nw-invisible': $ctrl.editMode}\\\" ng-disabled=\\\"$ctrl.disabled\\\"\\n\" + \"\t\t\t contenteditable placeholder=\\\"{{$ctrl.placeholder}}\\\">\\n\" + \"\t\t\t</div>\\n\" + \"\t\t</div>\\n\" + \"\t</div>\\n\" + \"</div>\");\n}]);\n//# sourceMappingURL=ng-wig.js.map\n"]}